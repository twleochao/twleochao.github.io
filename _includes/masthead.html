{% capture logo_path %}{{ site.logo }}{% endcapture %}
{% assign logo_url = logo_path | relative_url %}

<style>
  /* 1. BASE LINK STYLE */
  .custom-nav-link {
    display: block;
    position: relative; /* Needed for the absolute positioning of the line */
    color: #fff !important;
    text-decoration: none !important;
    border: none !important;
    box-shadow: none !important; /* Kills the default blue underline */
    padding-bottom: 5px; /* Space between text and line */
  }

  /* 2. THE INVISIBLE LINE (Pre-Hover) */
  .custom-nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%; /* Start from the middle */
    transform: translateX(-50%); /* Center alignment */
    width: 0%; /* Start invisible */
    height: 3px; /* Thickness of the line */
    background-color: #48c774; /* Your Green */
    transition: width 0.3s ease-in-out; /* The Animation Speed */
  }

  /* 3. THE HOVER ACTION */
  .custom-nav-link:hover {
    color: #fff !important; /* Text stays white */
  }
  
  /* Grow the line to 100% width on hover */
  .custom-nav-link:hover::after {
    width: 100%; 
  }
</style>

<div class="masthead" style="background-color: #252a34 !important; border-bottom: 1px solid #333; position: relative; z-index: 999;">
  <div class="masthead__inner-wrap" style="background-color: #252a34 !important;">
    <div class="masthead__menu">
      <nav class="greedy-nav" style="background-color: #252a34 !important;">
        
        <a class="site-logo" href="{{ '/' | relative_url }}">
          <img src="{{ logo_url }}" alt="">
        </a>
        
        <ul class="visible-links">
          {% for link in site.data.navigation.main %}
            <li class="masthead__menu-item">
              <a href="{{ link.url | relative_url }}" class="custom-nav-link">
                {{ link.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">{{ site.data.ui-text[site.locale].menu_label | default: "Menu" }}</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>